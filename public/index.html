<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width"
    />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <link rel="stylesheet" href="css/leaflet.css" />
    <link rel="stylesheet" href="css/L.Control.Layers.Tree.css" />
    <link rel="stylesheet" href="css/L.Control.Locate.min.css" />
    <link rel="stylesheet" href="css/qgis2web.css" />
    <link rel="stylesheet" href="css/fontawesome-all.min.css" />
    <link rel="stylesheet" href="css/leaflet-search.css" />
    <link rel="stylesheet" href="css/filter.css" />
    <link rel="stylesheet" href="css/nouislider.min.css" />
    <link rel="stylesheet" href="css/leaflet-measure.css" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/leaflet-easyprint/2.1.9/easyPrint.css"
    />

    <style>
      html,
      body,
      #map {
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
      }
      #select-area-btn {
        position: absolute;
        bottom: 20px;
        left: 20px;
        z-index: 1000;
        background-color: #007bff;
        color: white;
        padding: 10px 15px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
      }
      #select-area-btn:hover {
        background-color: #0056b3;
      }

      #generate-pdf-button {
        position: absolute;
        bottom: 10px;
        left: 10px;
        z-index: 1000; /* Ensure it appears above the map */
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
      }

      #generate-pdf-button:hover {
        background-color: #0056b3;
      }
    </style>
    <title>
      Registrul local al spatiilor verzi, Com. Mihai Viteazu, Jud. Cluj
    </title>
  </head>
  <body>
    <div id="map"></div>

    <script src="js/qgis2web_expressions.js"></script>
    <script src="js/leaflet.js"></script>
    <script src="js/L.Control.Layers.Tree.min.js"></script>
    <script src="js/L.Control.Locate.min.js"></script>
    <script src="js/leaflet.rotatedMarker.js"></script>
    <script src="js/leaflet.pattern.js"></script>
    <script src="js/leaflet-hash.js"></script>
    <script src="js/Autolinker.min.js"></script>
    <script src="js/rbush.min.js"></script>
    <script src="js/labelgun.min.js"></script>
    <script src="js/labels.js"></script>
    <script src="js/leaflet-measure.js"></script>
    <script src="js/leaflet-search.js"></script>
    <script src="js/tailDT.js"></script>
    <script src="js/nouislider.min.js"></script>
    <script src="js/wNumb.js"></script>
    <script src="data/LimitaUAT_2.js"></script>
    <script src="data/Intravilan_3.js"></script>
    <script src="data/Imobile_4.js"></script>
    <script src="data/Parcele_5.js"></script>
    <script src="data/Constructii_6.js"></script>
    <script src="data/Arbori_7.js"></script>
    <script src="data/GardVIu_8.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.js"></script>
    <script src="https://unpkg.com/leaflet-pip@1.1.0/leaflet-pip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <script>
      var map = L.map("map", {
        zoomControl: false,
        maxZoom: 18,
        minZoom: 1,
      }).fitBounds([
        [46.538830465625765, 23.74409226608196],
        [46.54076431980635, 23.748638235140515],
      ]);

      var hash = new L.Hash(map);
      map.attributionControl.setPrefix(
        '<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>'
      );
      var autolinker = new Autolinker({
        truncate: { length: 30, location: "smart" },
      });
      // remove popup's row if "visible-with-data"
      function removeEmptyRowsFromPopupContent(content, feature) {
        var tempDiv = document.createElement("div");
        tempDiv.innerHTML = content;
        var rows = tempDiv.querySelectorAll("tr");
        for (var i = 0; i < rows.length; i++) {
          var td = rows[i].querySelector("td.visible-with-data");
          var key = td ? td.id : "";
          if (
            td &&
            td.classList.contains("visible-with-data") &&
            feature.properties[key] == null
          ) {
            rows[i].parentNode.removeChild(rows[i]);
          }
        }
        return tempDiv.innerHTML;
      }
      // add class to format popup if it contains media
      function addClassToPopupIfMedia(content, popup) {
        var tempDiv = document.createElement("div");
        tempDiv.innerHTML = content;
        if (tempDiv.querySelector("td img")) {
          popup._contentNode.classList.add("media");
          // Delay to force the redraw
          setTimeout(function () {
            popup.update();
          }, 10);
        } else {
          popup._contentNode.classList.remove("media");
        }
      }
      var title = new L.Control({ position: "topleft" });
      title.onAdd = function (map) {
        this._div = L.DomUtil.create("div", "info");
        this.update();
        return this._div;
      };
      title.update = function () {
        this._div.innerHTML =
          "<h2>Registrul local al spatiilor verzi, Com. Mihai Viteazu, Jud. Cluj</h2>";
      };
      title.addTo(map);
      var zoomControl = L.control
        .zoom({
          position: "topleft",
        })
        .addTo(map);
      var measureControl = new L.Control.Measure({
        position: "topleft",
        primaryLengthUnit: "meters",
        secondaryLengthUnit: "kilometers",
        primaryAreaUnit: "sqmeters",
        secondaryAreaUnit: "hectares",
      });
      measureControl.addTo(map);
      document.getElementsByClassName(
        "leaflet-control-measure-toggle"
      )[0].innerHTML = "";
      document.getElementsByClassName(
        "leaflet-control-measure-toggle"
      )[0].className += " fas fa-ruler";
      var bounds_group = new L.featureGroup([]);
      function setBounds() {}
      map.createPane("pane_GoogleMaps_0");
      map.getPane("pane_GoogleMaps_0").style.zIndex = 400;
      var layer_GoogleMaps_0 = L.tileLayer(
        "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
        {
          attribution: "&copy; OpenStreetMap contributors",
          crossOrigin: true,
        }
      );
      layer_GoogleMaps_0;
      map.addLayer(layer_GoogleMaps_0);
      map.createPane("pane_GoogleSatellite_1");
      map.getPane("pane_GoogleSatellite_1").style.zIndex = 401;
      var layer_GoogleSatellite_1 = L.tileLayer(
        "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
        {
          attribution: "&copy; OpenStreetMap contributors",
          crossOrigin: true,
        }
      );
      layer_GoogleSatellite_1;
      map.addLayer(layer_GoogleSatellite_1);

      function pop_LimitaUAT_2(feature, layer) {}

      function style_LimitaUAT_2_0() {
        return {
          pane: "pane_LimitaUAT_2",
          opacity: 1,
          color: "rgba(177,57,53,1.0)",
          dashArray: "",
          lineCap: "square",
          lineJoin: "bevel",
          weight: 4.0,
          fillOpacity: 0,
          interactive: true,
        };
      }
      map.createPane("pane_LimitaUAT_2");
      map.getPane("pane_LimitaUAT_2").style.zIndex = 402;
      map.getPane("pane_LimitaUAT_2").style["mix-blend-mode"] = "normal";
      var layer_LimitaUAT_2 = new L.geoJson(json_LimitaUAT_2, {
        attribution: "",
        interactive: true,
        dataVar: "json_LimitaUAT_2",
        layerName: "layer_LimitaUAT_2",
        pane: "pane_LimitaUAT_2",
        onEachFeature: pop_LimitaUAT_2,
        style: style_LimitaUAT_2_0,
      });
      bounds_group.addLayer(layer_LimitaUAT_2);
      map.addLayer(layer_LimitaUAT_2);
      function pop_Intravilan_3(feature, layer) {
        var popupContent =
          "<table>\
                </table>";
        var content = removeEmptyRowsFromPopupContent(popupContent, feature);
        layer.on("popupopen", function (e) {
          addClassToPopupIfMedia(content, e.popup);
        });
        layer.bindPopup(content, { maxHeight: 400 });
      }

      function style_Intravilan_3_0() {
        return {
          pane: "pane_Intravilan_3",
          opacity: 1,
          color: "rgba(53,121,177,1.0)",
          dashArray: "",
          lineCap: "square",
          lineJoin: "bevel",
          weight: 4.0,
          fillOpacity: 0,
          interactive: false,
        };
      }
      map.createPane("pane_Intravilan_3");
      map.getPane("pane_Intravilan_3").style.zIndex = 403;
      map.getPane("pane_Intravilan_3").style["mix-blend-mode"] = "normal";
      var layer_Intravilan_3 = new L.geoJson(json_Intravilan_3, {
        attribution: "",
        interactive: false,
        dataVar: "json_Intravilan_3",
        layerName: "layer_Intravilan_3",
        pane: "pane_Intravilan_3",
        onEachFeature: pop_Intravilan_3,
        style: style_Intravilan_3_0,
      });
      bounds_group.addLayer(layer_Intravilan_3);
      map.addLayer(layer_Intravilan_3);
      function pop_Imobile_4(feature, layer) {
        var popupContent =
          '<table>\
                    <tr>\
                        <th scope="row">Id_ imobil</th>\
                        <td>' +
          (feature.properties["Id_ imobil"] !== null
            ? autolinker.link(feature.properties["Id_ imobil"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Judetul</th>\
                        <td>' +
          (feature.properties["Judetul"] !== null
            ? autolinker.link(feature.properties["Judetul"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Localitate</th>\
                        <td>' +
          (feature.properties["Localitate"] !== null
            ? autolinker.link(feature.properties["Localitate"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">CodSiruta</th>\
                        <td>' +
          (feature.properties["CodSiruta"] !== null
            ? autolinker.link(feature.properties["CodSiruta"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Nr_cad</th>\
                        <td>' +
          (feature.properties["Nr_cad"] !== null
            ? autolinker.link(feature.properties["Nr_cad"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Nr_CF</th>\
                        <td>' +
          (feature.properties["Nr_CF"] !== null
            ? autolinker.link(feature.properties["Nr_CF"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Suprafata</th>\
                        <td>' +
          (feature.properties["Suprafata"] !== null
            ? autolinker.link(feature.properties["Suprafata"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Codpostal</th>\
                        <td>' +
          (feature.properties["Codpostal"] !== null
            ? autolinker.link(feature.properties["Codpostal"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Adresa</th>\
                        <td>' +
          (feature.properties["Adresa"] !== null
            ? autolinker.link(feature.properties["Adresa"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Denumire</th>\
                        <td>' +
          (feature.properties["Denumire"] !== null
            ? autolinker.link(feature.properties["Denumire"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">TipSV</th>\
                        <td>' +
          (feature.properties["TipSV"] !== null
            ? autolinker.link(feature.properties["TipSV"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">SubtipSV</th>\
                        <td>' +
          (feature.properties["SubtipSV"] !== null
            ? autolinker.link(feature.properties["SubtipSV"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Echip_edil</th>\
                        <td>' +
          (feature.properties["Echip_edil"] !== null
            ? autolinker.link(feature.properties["Echip_edil"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Document</th>\
                        <td class="visible-with-data" id="Document">' +
          (feature.properties["Document"] !== null
            ? autolinker.link(feature.properties["Document"].toLocaleString())
            : "") +
          "</td>\
                    </tr>\
                </table>";
        var content = removeEmptyRowsFromPopupContent(popupContent, feature);
        layer.on("popupopen", function (e) {
          addClassToPopupIfMedia(content, e.popup);
        });
        layer.bindPopup(content, { maxHeight: 400 });
      }

      function style_Imobile_4_0() {
        return {
          pane: "pane_Imobile_4",
          opacity: 1,
          color: "rgba(248,248,113,1.0)",
          dashArray: "",
          lineCap: "square",
          lineJoin: "bevel",
          weight: 4.0,
          fillOpacity: 0,
          interactive: true,
        };
      }
      map.createPane("pane_Imobile_4");
      map.getPane("pane_Imobile_4").style.zIndex = 404;
      map.getPane("pane_Imobile_4").style["mix-blend-mode"] = "normal";
      var layer_Imobile_4 = new L.geoJson(json_Imobile_4, {
        attribution: "",
        interactive: true,
        dataVar: "json_Imobile_4",
        layerName: "layer_Imobile_4",
        pane: "pane_Imobile_4",
        onEachFeature: pop_Imobile_4,
        style: style_Imobile_4_0,
      });
      bounds_group.addLayer(layer_Imobile_4);
      map.addLayer(layer_Imobile_4);
      function pop_Parcele_5(feature, layer) {
        var popupContent =
          '<table>\
                    <tr>\
                        <th scope="row">Id_parcela</th>\
                        <td>' +
          (feature.properties["Id_parcela"] !== null
            ? autolinker.link(feature.properties["Id_parcela"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Prop_detin</th>\
                        <td>' +
          (feature.properties["Prop_detin"] !== null
            ? autolinker.link(feature.properties["Prop_detin"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Tip_prop</th>\
                        <td>' +
          (feature.properties["Tip_prop"] !== null
            ? autolinker.link(feature.properties["Tip_prop"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Mod_adm</th>\
                        <td>' +
          (feature.properties["Mod_adm"] !== null
            ? autolinker.link(feature.properties["Mod_adm"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Categ</th>\
                        <td>' +
          (feature.properties["Categ"] !== null
            ? autolinker.link(feature.properties["Categ"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Reg_urb</th>\
                        <td class="visible-with-data" id="Reg_urb">' +
          (feature.properties["Reg_urb"] !== null
            ? autolinker.link(feature.properties["Reg_urb"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Suprafata</th>\
                        <td>' +
          (feature.properties["Suprafata"] !== null
            ? autolinker.link(feature.properties["Suprafata"].toLocaleString())
            : "") +
          "</td>\
                    </tr>\
                </table>";
        var content = removeEmptyRowsFromPopupContent(popupContent, feature);
        layer.on("popupopen", function (e) {
          addClassToPopupIfMedia(content, e.popup);
        });
        layer.bindPopup(content, { maxHeight: 400 });
      }

      function style_Parcele_5_0(feature) {
        switch (String(feature.properties["Categ"])) {
          case "CC":
            return {
              pane: "pane_Parcele_5",
              opacity: 1,
              color: "rgba(35,35,35,1.0)",
              dashArray: "",
              lineCap: "butt",
              lineJoin: "miter",
              weight: 1.0,
              fill: true,
              fillOpacity: 0.5,
              fillColor: "rgba(96,154,208,1.0)",
              interactive: true,
            };
            break;
          case "CPC":
            return {
              pane: "pane_Parcele_5",
              opacity: 1,
              color: "rgba(35,35,35,1.0)",
              dashArray: "",
              lineCap: "butt",
              lineJoin: "miter",
              weight: 1.0,
              fill: true,
              fillOpacity: 0.5,
              fillColor: "rgba(101,223,176,1.0)",
              interactive: true,
            };
            break;
          case "DR":
            return {
              pane: "pane_Parcele_5",
              opacity: 1,
              color: "rgba(35,35,35,1.0)",
              dashArray: "",
              lineCap: "butt",
              lineJoin: "miter",
              weight: 1.0,
              fill: true,
              fillOpacity: 0.5,
              fillColor: "rgba(218,218,218,1.0)",
              interactive: true,
            };
            break;
          case "HC":
            return {
              pane: "pane_Parcele_5",
              opacity: 1,
              color: "rgba(35,35,35,1.0)",
              dashArray: "",
              lineCap: "butt",
              lineJoin: "miter",
              weight: 1.0,
              fill: true,
              fillOpacity: 0.5,
              fillColor: "rgba(227,120,114,1.0)",
              interactive: true,
            };
            break;
          case "MON":
            return {
              pane: "pane_Parcele_5",
              opacity: 1,
              color: "rgba(35,35,35,1.0)",
              dashArray: "",
              lineCap: "butt",
              lineJoin: "miter",
              weight: 1.0,
              fill: true,
              fillOpacity: 0.5,
              fillColor: "rgba(218,207,91,1.0)",
              interactive: true,
            };
            break;
          case "SV":
            return {
              pane: "pane_Parcele_5",
              opacity: 1,
              color: "rgba(35,35,35,1.0)",
              dashArray: "",
              lineCap: "butt",
              lineJoin: "miter",
              weight: 1.0,
              fill: true,
              fillOpacity: 0.5,
              fillColor: "rgba(107,225,89,1.0)",
              interactive: true,
            };
            break;
        }
      }
      map.createPane("pane_Parcele_5");
      map.getPane("pane_Parcele_5").style.zIndex = 405;
      map.getPane("pane_Parcele_5").style["mix-blend-mode"] = "normal";
      var layer_Parcele_5 = new L.geoJson(json_Parcele_5, {
        attribution: "",
        interactive: true,
        dataVar: "json_Parcele_5",
        layerName: "layer_Parcele_5",
        pane: "pane_Parcele_5",
        onEachFeature: pop_Parcele_5,
        style: style_Parcele_5_0,
      });
      bounds_group.addLayer(layer_Parcele_5);
      map.addLayer(layer_Parcele_5);
      function pop_Constructii_6(feature, layer) {
        var popupContent =
          '<table>\
                    <tr>\
                        <th scope="row">Prop_detin</th>\
                        <td>' +
          (feature.properties["Prop_detin"] !== null
            ? autolinker.link(feature.properties["Prop_detin"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Tip_prop</th>\
                        <td>' +
          (feature.properties["Tip_prop"] !== null
            ? autolinker.link(feature.properties["Tip_prop"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Mod_adm</th>\
                        <td>' +
          (feature.properties["Mod_adm"] !== null
            ? autolinker.link(feature.properties["Mod_adm"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Cod_dest</th>\
                        <td>' +
          (feature.properties["Cod_dest"] !== null
            ? autolinker.link(feature.properties["Cod_dest"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Supr_const</th>\
                        <td>' +
          (feature.properties["Supr_const"] !== null
            ? autolinker.link(feature.properties["Supr_const"].toLocaleString())
            : "") +
          "</td>\
                    </tr>\
                </table>";
        var content = removeEmptyRowsFromPopupContent(popupContent, feature);
        layer.on("popupopen", function (e) {
          addClassToPopupIfMedia(content, e.popup);
        });
        layer.bindPopup(content, { maxHeight: 400 });
      }

      function style_Constructii_6_0() {
        return {
          pane: "pane_Constructii_6",
          opacity: 1,
          color: "rgba(35,35,35,1.0)",
          dashArray: "",
          lineCap: "butt",
          lineJoin: "miter",
          weight: 1.0,
          fill: true,
          fillOpacity: 0.5,
          fillColor: "rgba(242,64,64,1.0)",
          interactive: true,
        };
      }
      map.createPane("pane_Constructii_6");
      map.getPane("pane_Constructii_6").style.zIndex = 406;
      map.getPane("pane_Constructii_6").style["mix-blend-mode"] = "normal";
      var layer_Constructii_6 = new L.geoJson(json_Constructii_6, {
        attribution: "",
        interactive: true,
        dataVar: "json_Constructii_6",
        layerName: "layer_Constructii_6",
        pane: "pane_Constructii_6",
        onEachFeature: pop_Constructii_6,
        style: style_Constructii_6_0,
      });
      bounds_group.addLayer(layer_Constructii_6);
      map.addLayer(layer_Constructii_6);
      function pop_Arbori_7(feature, layer) {
        var popupContent =
          '<table>\
                    <tr>\
                        <th scope="row">Id_arbore</th>\
                        <td>' +
          (feature.properties["Id_arbore"] !== null
            ? autolinker.link(feature.properties["Id_arbore"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Grupa</th>\
                        <td>' +
          (feature.properties["Grupa"] !== null
            ? autolinker.link(feature.properties["Grupa"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Talie</th>\
                        <td>' +
          (feature.properties["Talie"] !== null
            ? autolinker.link(feature.properties["Talie"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Inaltime</th>\
                        <td>' +
          (feature.properties["Inaltime"] !== null
            ? autolinker.link(feature.properties["Inaltime"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Cod_diam</th>\
                        <td>' +
          (feature.properties["Cod_diam"] !== null
            ? autolinker.link(feature.properties["Cod_diam"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Diametru</th>\
                        <td>' +
          (feature.properties["Diametru"] !== null
            ? autolinker.link(feature.properties["Diametru"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Cod_coro</th>\
                        <td>' +
          (feature.properties["Cod_coro"] !== null
            ? autolinker.link(feature.properties["Cod_coro"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Coronament</th>\
                        <td>' +
          (feature.properties["Coronament"] !== null
            ? autolinker.link(feature.properties["Coronament"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Varsta</th>\
                        <td>' +
          (feature.properties["Varsta"] !== null
            ? autolinker.link(feature.properties["Varsta"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Stare_viab</th>\
                        <td>' +
          (feature.properties["Stare_viab"] !== null
            ? autolinker.link(feature.properties["Stare_viab"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Grad_intre</th>\
                        <td>' +
          (feature.properties["Grad_intre"] !== null
            ? autolinker.link(feature.properties["Grad_intre"].toLocaleString())
            : "") +
          '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Risc_pot</th>\
                        <td class="visible-with-data" id="Risc_pot">' +
          (feature.properties["Risc_pot"] !== null
            ? autolinker.link(feature.properties["Risc_pot"].toLocaleString())
            : "") +
          "</td>\
                    </tr>\
                </table>";
        var content = removeEmptyRowsFromPopupContent(popupContent, feature);
        layer.on("popupopen", function (e) {
          addClassToPopupIfMedia(content, e.popup);
        });
        layer.bindPopup(content, { maxHeight: 400 });
      }

      function style_Arbori_7_0(feature) {
        switch (String(feature.properties["Specia"])) {
          case "Alun - (Corylus avellana)":
            return {
              pane: "pane_Arbori_7",
              radius: 4.0,
              opacity: 1,
              color: "rgba(35,35,35,1.0)",
              dashArray: "",
              lineCap: "butt",
              lineJoin: "miter",
              weight: 1,
              fill: true,
              fillOpacity: 0.5,
              fillColor: "rgba(216,236,34,1.0)",
              interactive: true,
            };
            break;
          case "Carpen - (Carpinus betulus)":
            return {
              pane: "pane_Arbori_7",
              radius: 4.0,
              opacity: 1,
              color: "rgba(35,35,35,1.0)",
              dashArray: "",
              lineCap: "butt",
              lineJoin: "miter",
              weight: 1,
              fill: true,
              fillOpacity: 0.5,
              fillColor: "rgba(206,50,36,1.0)",
              interactive: true,
            };
            break;
          case "Mar - (Malus domestica)":
            return {
              pane: "pane_Arbori_7",
              radius: 4.0,
              opacity: 1,
              color: "rgba(35,35,35,1.0)",
              dashArray: "",
              lineCap: "butt",
              lineJoin: "miter",
              weight: 1,
              fill: true,
              fillOpacity: 0.5,
              fillColor: "rgba(87,74,202,1.0)",
              interactive: true,
            };
            break;
          case "Salcam - (Robinia pseudacacia)":
            return {
              pane: "pane_Arbori_7",
              radius: 4.0,
              opacity: 1,
              color: "rgba(35,35,35,1.0)",
              dashArray: "",
              lineCap: "butt",
              lineJoin: "miter",
              weight: 1,
              fill: true,
              fillOpacity: 0.5,
              fillColor: "rgba(60,231,77,1.0)",
              interactive: true,
            };
            break;
          case "Tuie - (Thuja occidentalis)":
            return {
              pane: "pane_Arbori_7",
              radius: 4.0,
              opacity: 1,
              color: "rgba(35,35,35,1.0)",
              dashArray: "",
              lineCap: "butt",
              lineJoin: "miter",
              weight: 1,
              fill: true,
              fillOpacity: 0.5,
              fillColor: "rgba(219,45,202,1.0)",
              interactive: true,
            };
            break;
        }
      }
      // Ce are legatura cu Arbori
      map.createPane("pane_Arbori_7");
      map.getPane("pane_Arbori_7").style.zIndex = 407;
      map.getPane("pane_Arbori_7").style["mix-blend-mode"] = "normal";
      var layer_Arbori_7 = new L.geoJson(json_Arbori_7, {
        attribution: "",
        interactive: true,
        dataVar: "json_Arbori_7",
        layerName: "layer_Arbori_7",
        pane: "pane_Arbori_7",
        onEachFeature: pop_Arbori_7,
        pointToLayer: function (feature, latlng) {
          var context = {
            feature: feature,
            variables: {},
          };
          return L.circleMarker(latlng, style_Arbori_7_0(feature));
        },
      });
      bounds_group.addLayer(layer_Arbori_7);
      map.addLayer(layer_Arbori_7);
      function pop_GardVIu_8(feature, layer) {
        var popupContent =
          '<table>\
                    <tr>\
                        <th scope="row">Lungime</th>\
                        <td>' +
          (feature.properties["Lungime"] !== null
            ? autolinker.link(feature.properties["Lungime"].toLocaleString())
            : "") +
          "</td>\
                    </tr>\
                </table>";
        var content = removeEmptyRowsFromPopupContent(popupContent, feature);
        layer.on("popupopen", function (e) {
          addClassToPopupIfMedia(content, e.popup);
        });
        layer.bindPopup(content, { maxHeight: 400 });
      }

      function style_GardVIu_8_0() {
        return {
          pane: "pane_GardVIu_8",
          opacity: 1,
          color: "rgba(183,72,75,1.0)",
          dashArray: "",
          lineCap: "square",
          lineJoin: "bevel",
          weight: 1.0,
          fillOpacity: 0,
          interactive: true,
        };
      }
      map.createPane("pane_GardVIu_8");
      map.getPane("pane_GardVIu_8").style.zIndex = 408;
      map.getPane("pane_GardVIu_8").style["mix-blend-mode"] = "normal";
      var layer_GardVIu_8 = new L.geoJson(json_GardVIu_8, {
        attribution: "",
        interactive: true,
        dataVar: "json_GardVIu_8",
        layerName: "layer_GardVIu_8",
        pane: "pane_GardVIu_8",
        onEachFeature: pop_GardVIu_8,
        style: style_GardVIu_8_0,
      });
      bounds_group.addLayer(layer_GardVIu_8);
      map.addLayer(layer_GardVIu_8);
      var overlaysTree = [
        {
          label: '<img src="legend/GardVIu_8.png" /> GardVIu',
          layer: layer_GardVIu_8,
        },
        {
          label:
            'Arbori<br /><table><tr><td style="text-align: center;"><img src="legend/Arbori_7_AlunCorylusavellana0.png" /></td><td>Alun - (Corylus avellana)</td></tr><tr><td style="text-align: center;"><img src="legend/Arbori_7_CarpenCarpinusbetulus1.png" /></td><td>Carpen - (Carpinus betulus)</td></tr><tr><td style="text-align: center;"><img src="legend/Arbori_7_MarMalusdomestica2.png" /></td><td>Mar - (Malus domestica)</td></tr><tr><td style="text-align: center;"><img src="legend/Arbori_7_SalcamRobiniapseudacacia3.png" /></td><td>Salcam - (Robinia pseudacacia)</td></tr><tr><td style="text-align: center;"><img src="legend/Arbori_7_TuieThujaoccidentalis4.png" /></td><td>Tuie - (Thuja occidentalis)</td></tr></table>',
          layer: layer_Arbori_7,
        },
        {
          label: '<img src="legend/Constructii_6.png" /> Constructii',
          layer: layer_Constructii_6,
        },
        {
          label:
            'Parcele<br /><table><tr><td style="text-align: center;"><img src="legend/Parcele_5_CC0.png" /></td><td>CC</td></tr><tr><td style="text-align: center;"><img src="legend/Parcele_5_CPC1.png" /></td><td>CPC</td></tr><tr><td style="text-align: center;"><img src="legend/Parcele_5_DR2.png" /></td><td>DR</td></tr><tr><td style="text-align: center;"><img src="legend/Parcele_5_HC3.png" /></td><td>HC</td></tr><tr><td style="text-align: center;"><img src="legend/Parcele_5_MON4.png" /></td><td>MON</td></tr><tr><td style="text-align: center;"><img src="legend/Parcele_5_SV5.png" /></td><td>SV</td></tr></table>',
          layer: layer_Parcele_5,
        },
        {
          label: '<img src="legend/Imobile_4.png" /> Imobile',
          layer: layer_Imobile_4,
        },
        {
          label: '<img src="legend/Intravilan_3.png" /> Intravilan',
          layer: layer_Intravilan_3,
        },
        {
          label: '<img src="legend/LimitaUAT_2.png" /> Limita UAT',
          layer: layer_LimitaUAT_2,
        },
        {
          label: "<b>Harta de baza</b>",
          selectAllCheckbox: true,
          children: [
            { label: "Google Satellite", layer: layer_GoogleSatellite_1 },
            { label: "Google Maps", layer: layer_GoogleMaps_0 },
          ],
        },
      ];
      var lay = L.control.layers.tree(null, overlaysTree, {
        //namedToggle: true,
        //selectorBack: false,
        //closedSymbol: '&#8862; &#x1f5c0;',
        //openedSymbol: '&#8863; &#x1f5c1;',
        //collapseAll: 'Collapse all',
        //expandAll: 'Expand all',
        collapsed: true,
      });
      lay.addTo(map);
      setBounds();
      var i = 0;
      layer_Constructii_6.eachLayer(function (layer) {
        var context = {
          feature: layer.feature,
          variables: {},
        };
        layer.bindTooltip(
          layer.feature.properties["Nr_corp"] !== null
            ? String(
                "<div style=\"color: #323232; font-size: 10pt; font-family: 'Open Sans', sans-serif;\">" +
                  layer.feature.properties["Nr_corp"]
              ) + "</div>"
            : "",
          { permanent: true, offset: [-0, -16], className: "css_Constructii_6" }
        );
        labels.push(layer);
        totalMarkers += 1;
        layer.added = true;
        addLabel(layer, i);
        i++;
      });
      var i = 0;
      layer_Arbori_7.eachLayer(function (layer) {
        var context = {
          feature: layer.feature,
          variables: {},
        };
        layer.bindTooltip(
          layer.feature.properties["Specia"] !== null
            ? String(
                "<div style=\"color: #323232; font-size: 10pt; font-family: 'Open Sans', sans-serif;\">" +
                  layer.feature.properties["Specia"]
              ) + "</div>"
            : "",
          { permanent: true, offset: [-0, -16], className: "css_Arbori_7" }
        );
        labels.push(layer);
        totalMarkers += 1;
        layer.added = true;
        addLabel(layer, i);
        i++;
      });
      map.addControl(
        new L.Control.Search({
          layer: layer_Imobile_4,
          initial: false,
          hideMarkerOnCollapse: true,
          propertyName: "Nr_cad",
        })
      );
      document.getElementsByClassName("search-button")[0].className +=
        " fa fa-binoculars";
      var mapDiv = document.getElementById("map");
      var row = document.createElement("div");
      row.className = "row";
      row.id = "all";
      row.style.height = "100%";
      var col1 = document.createElement("div");
      col1.className = "col9";
      col1.id = "mapWindow";
      col1.style.height = "99%";
      col1.style.width = "80%";
      col1.style.display = "inline-block";
      var col2 = document.createElement("div");
      col2.className = "col3";
      col2.id = "menu";
      col2.style.display = "inline-block";
      mapDiv.parentNode.insertBefore(row, mapDiv);
      document.getElementById("all").appendChild(col1);
      document.getElementById("all").appendChild(col2);
      col1.appendChild(mapDiv);
      var Filters = { Inaltime: "real" };
      function filterFunc() {
        map.eachLayer(function (lyr) {
          if ("options" in lyr && "dataVar" in lyr["options"]) {
            features = this[lyr["options"]["dataVar"]].features.slice(0);
            try {
              for (key in Filters) {
                keyS = key.replace(/[^a-zA-Z0-9_]/g, "");
                if (Filters[key] == "str" || Filters[key] == "bool") {
                  var selection = [];
                  var options = document.getElementById("sel_" + keyS).options;
                  for (var i = 0; i < options.length; i++) {
                    if (options[i].selected) selection.push(options[i].value);
                  }
                  try {
                    if (key in features[0].properties) {
                      for (i = features.length - 1; i >= 0; --i) {
                        if (
                          selection.indexOf(features[i].properties[key]) < 0 &&
                          selection.length > 0
                        ) {
                          features.splice(i, 1);
                        }
                      }
                    }
                  } catch (err) {}
                }
                if (Filters[key] == "int") {
                  sliderVals = document
                    .getElementById("div_" + keyS)
                    .noUiSlider.get();
                  try {
                    if (key in features[0].properties) {
                      for (i = features.length - 1; i >= 0; --i) {
                        if (
                          parseInt(features[i].properties[key]) <
                            sliderVals[0] ||
                          parseInt(features[i].properties[key]) > sliderVals[1]
                        ) {
                          features.splice(i, 1);
                        }
                      }
                    }
                  } catch (err) {}
                }
                if (Filters[key] == "real") {
                  sliderVals = document
                    .getElementById("div_" + keyS)
                    .noUiSlider.get();
                  try {
                    if (key in features[0].properties) {
                      for (i = features.length - 1; i >= 0; --i) {
                        if (
                          features[i].properties[key] < sliderVals[0] ||
                          features[i].properties[key] > sliderVals[1]
                        ) {
                          features.splice(i, 1);
                        }
                      }
                    }
                  } catch (err) {}
                }
                if (
                  Filters[key] == "date" ||
                  Filters[key] == "datetime" ||
                  Filters[key] == "time"
                ) {
                  try {
                    if (key in features[0].properties) {
                      HTMLkey = key.replace(/[&\/\\#,+()$~%.'":*?<>{} ]/g, "");
                      startdate = document
                        .getElementById("dat_" + HTMLkey + "_date1")
                        .value.replace(" ", "T");
                      enddate = document
                        .getElementById("dat_" + HTMLkey + "_date2")
                        .value.replace(" ", "T");
                      for (i = features.length - 1; i >= 0; --i) {
                        if (
                          features[i].properties[key] < startdate ||
                          features[i].properties[key] > enddate
                        ) {
                          features.splice(i, 1);
                        }
                      }
                    }
                  } catch (err) {}
                }
              }
            } catch (err) {}
            this[lyr["options"]["layerName"]].clearLayers();
            this[lyr["options"]["layerName"]].addData(features);
            var i = 0;
            layer_Constructii_6.eachLayer(function (layer) {
              var context = {
                feature: layer.feature,
                variables: {},
              };
              layer.bindTooltip(
                layer.feature.properties["Nr_corp"] !== null
                  ? String(
                      "<div style=\"color: #323232; font-size: 10pt; font-family: 'Open Sans', sans-serif;\">" +
                        layer.feature.properties["Nr_corp"]
                    ) + "</div>"
                  : "",
                {
                  permanent: true,
                  offset: [-0, -16],
                  className: "css_Constructii_6",
                }
              );
              labels.push(layer);
              totalMarkers += 1;
              layer.added = true;
              addLabel(layer, i);
              i++;
            });
            var i = 0;
            layer_Arbori_7.eachLayer(function (layer) {
              var context = {
                feature: layer.feature,
                variables: {},
              };
              layer.bindTooltip(
                layer.feature.properties["Specia"] !== null
                  ? String(
                      "<div style=\"color: #323232; font-size: 10pt; font-family: 'Open Sans', sans-serif;\">" +
                        layer.feature.properties["Specia"]
                    ) + "</div>"
                  : "",
                {
                  permanent: true,
                  offset: [-0, -16],
                  className: "css_Arbori_7",
                }
              );
              labels.push(layer);
              totalMarkers += 1;
              layer.added = true;
              addLabel(layer, i);
              i++;
            });
          }
        });
      }
      document
        .getElementById("menu")
        .appendChild(document.createElement("div"));
      var div_Inaltime = document.createElement("div");
      div_Inaltime.id = "div_Inaltime";
      div_Inaltime.className = "slider";
      document.getElementById("menu").appendChild(div_Inaltime);
      var lab_Inaltime = document.createElement("div");
      lab_Inaltime.innerHTML = 'Inaltime: <span id="val_Inaltime"></span>';
      lab_Inaltime.className = "filterlabel";
      document.getElementById("menu").appendChild(lab_Inaltime);
      var reset_Inaltime = document.createElement("div");
      reset_Inaltime.innerHTML = "clear filter";
      reset_Inaltime.className = "filterlabel";
      lab_Inaltime.className = "filterlabel";
      reset_Inaltime.onclick = function () {
        sel_Inaltime.noUiSlider.reset();
      };
      document.getElementById("menu").appendChild(reset_Inaltime);
      var sel_Inaltime = document.getElementById("div_Inaltime");
      noUiSlider.create(sel_Inaltime, {
        connect: true,
        start: [3.0, 9.0],
        range: {
          min: 3.0,
          max: 9.0,
        },
      });
      sel_Inaltime.noUiSlider.on("update", function (values) {
        val_Inaltime = document.getElementById("val_Inaltime");
        val_Inaltime.innerHTML = values.join(" - ");
        filterFunc();
      });
      resetLabels([layer_Constructii_6, layer_Arbori_7]);
      map.on("zoomend", function () {
        resetLabels([layer_Constructii_6, layer_Arbori_7]);
      });
      map.on("layeradd", function () {
        resetLabels([layer_Constructii_6, layer_Arbori_7]);
      });
      map.on("layerremove", function () {
        resetLabels([layer_Constructii_6, layer_Arbori_7]);
      });
    </script>
    <script src="js/extra_pdf_export_logic.js"></script>
  </body>
</html>
